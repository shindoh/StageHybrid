
<div data-role="page" id="userModify">
	<link rel="stylesheet" type="text/css" href="footer.css" />
	<link rel="stylesheet" type="text/css" href="total.css" />
	<script id="userModifyTpl" type="text/x-jquery-tmpl">
	<div id="summary">
		<div ><img id="image" src="${frontPhoto}"></div>
		<div id="profile">ID : ${userId}<br><hr>최근 상태 <br>
						 <textarea cols="24%" rows="4" name="textarea" id="frontComment" value="${frontComment}" data-mini="true" /></div>
	</div>
	<div id="detail">
		<span id="row"><p id="index">성  별 </p>  <p id="data">${sex}</p></span>
		<span id="row"><p id="index">나  이 </p> 	<p id="data"><input type="text" name="name" id="age" value="${age}" data-mini="true" /></p></span>
		<span id="row"><p id="index">직  업</p> 	<p id="data"><input type="text" name="name" id="work" value="${work}" data-mini="true" /></p></span>
		<span id="row"><p id="index">관심사</p> <p id="data"><input type="text" name="name" id="lookingFor" value="${lookingFor}" data-mini="true" /></p></span>
	</div>
	</script>

	<script type="text/javascript">
		$("#userModify").on("pageinit", function(){
			
			//페이지 파라미터에서 id값 추출
			var pageParams = $.stage.component.pageParam();
			//템플릿 적용
			var info = $('#userModifyList');
			$('#userModifyTpl').tmpl(pageParams).appendTo(info);
			
			//정보 수정 클릭시 이벤트
			$("a#dynamic").bind("click",function (){
				var params = {};
				params.id = pageParams.userId;
				params.frontPhoto = pageParams.frontPhoto; //수정하기
				params.frontComment = $('#frontComment').val();
				params.age = $('#age').val();
				params.work = $('#work').val();
				params.lookingFor = $('#lookingFor').val();
				
				
				$.stageAjax.postJson($.stageRestPool.POST_USER_INFORM_MODIFY,params,function(result){
					var data = result.data;
					if(data ==-1){
						alert('수정에 실패하였습니다.');
					}else{
						alert('수정에 성공하였습니다.');
						$.stage.component.pageMove("../blog/blog.html");
					}
					
				},true);
			});
			
			$("#back").click(function() {
				$.stage.component.pageMove("../blog/blog.html");
			});
			/*
			$("#edit").click(function() {
				$.stageComponent.pageMove("cameraEdit.html",{});
		});
		$("#user").live("click",function(){
			$.stageComponent.pageMove("blog.html",{});
        });
		$("#ablum").live("click",function(){
			$.stageComponent.pageMove("camera.html",{});
        });
		$("#wall").live("click",function(){
			$.stageComponent.pageMove("wall.html",{});
        });
		
		$("#category").live("tap",function(){
			$(".overlay").toggle(50);
        });
		
        $(".ui-mobile-viewport").live("tap",function(event){
            var target = event.target;
            //Close the overlay if you have clicked on anywhere in body except the overlay itself and the button in header.
            //If the check for button in this if is skipped,you will not be able to show the overlay.Clicking on button in header to close is //handled by previous event handler.
            if($('#category').find(target).length==0 && $('.overlay').find(target).length==0) {
                $(".overlay").hide();
            }
            
        });*/
		});		
		
     </script>

	<header data-role="header" id="header" data-position="fixed" data-tap-toggle="false">
		<div id="back" class="ui-btn-left"></div>
		<h1>블로그</h1>
	<!-- <div id="category" class="ui-btn-right"></div> -->	
	</header>

	<section data-role="content">
		<span id="userModifyList"> </span> <a id="dynamic" data-role="button">수정하기</a>
	</section>
<!--
	<div class="overlay" style="display: none">
		<div class="overlay-content">
			<ul id='tas_list' data-role='listview'>
				<li id="user">개인 정보</li>
				<li id="ablum">앨범</li>
				<li id="wall">담벼락</li>
			</ul>
		</div>
	</div>
	-->
	<footer data-role="footer" id="footer" data-theme="a"
		data-position="fixed" data-tap-toggle="false">
		<ul>
			<li><a href="../talk/talkList.html" id="mainStalkButton"></a></li>
			<li><a href="blog.html" id="mainBlogButton"></a></li>
			<li><a href="../party/partyList.html" id="mainPartyButton"></a></li>
			<li><a href="camera.html" id="mainLoungeButton"></a></li>
			<li><a href="wall.html" id="mainSettingButton"></a></li>
		</ul>

	</footer>
</div>