
<div data-role="page" id="talkListPage">
	<script id="talkItemTpl" type="text/x-jquery-tmpl">
	<li data-messageId="${idx}" id='talkItem_${idx}'>
		<h3>${userId}</h3>
		<img src="${thumnail}">
		<div class="ui-li-aside">
			<p><strong>${comment}</strong></p>
		</div>
	</li>
	</script>

     <script type="text/javascript"> 
		$("#talkListPage").on("pageinit", function(){
			$.stageComponent.listview("talkList","talkItemTpl",$.stageRestPool.GET_TALK_LIST,null,function(){
				
				$("#talkList >li").bind("tap",function(){
			
					// ${이름} 과  변수명이 같아야 한다 그래야 tmpl 에서 알아서 찾아줌 
					var talkIdx =$(this).attr("data-messageId");
					var userId =$(this).children("h3").text();
					var thumnail =$(this).children("img").attr("src");
					var comment = $(this).children("div").children("p").children("strong").text();
					
					$.stage.component.pageMove("talkSubList.html",{talkIdx:talkIdx, userId:userId, thumnail:thumnail, comment:comment});		
				});
			});
		});		
     </script>
     
     
    <header data-role="header" data-position="fixed" data-tap-toggle="false">
        <h1>스테이지 톡</h1>
       	<a href="write.html" data-icon="grid" data-theme="b">톡쓰기</a>
    </header>

    <section data-role="content">
		<ul data-role="listview" id="talkList">
		</ul>
    </section>

    <footer data-role="footer" data-theme="a" data-position="fixed" data-tap-toggle="false">
		<div data-role="navbar">
			<a href="talkList.html" data-role="button" data-icon="myapp-email" data-iconpos="top" id="mainTalkButton">톡톡</a>
			<a href="clubList.html" data-role="button" id="mainClubButton">스테이지</a>
			<a href="lounge.html" data-role="button" id="mainLoungeButton">라운지</a>
			<a href="blog.html" data-role="button" id="mainBlogButton">블로그</a>	
			<a href="setting.html" data-role="button" id="mainSettingButton">셋팅</a>	
		</div>		
    </footer>
</div>


